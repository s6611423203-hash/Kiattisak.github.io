<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HH.glb — 3D Viewer</title>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <style>
    :root{--bg:#0b0f14;--panel:#0f1620;--text:#e6eef8;--muted:#8fa0b3;--accent:#1e90ff;--ring:rgba(30,144,255,.35)}
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;background:radial-gradient(1200px 600px at 70% 20%,#111a24 0%,#0b0f14 60%);color:var(--text);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans Thai","Noto Sans",sans-serif;display:flex;flex-direction:column;gap:12px}
    header{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;background:linear-gradient(180deg,#0d151f,#0b1119);border-bottom:1px solid #131e2a}
    header h1{font-size:16px;margin:0;color:#cfe3ff;font-weight:600;letter-spacing:.2px}
    .controls{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
    .control{display:flex;align-items:center;gap:8px;background:#0f1620;border:1px solid #152232;padding:8px 10px;border-radius:14px}
    model-viewer{width:100%;height:calc(100vh - 76px);background:transparent;--progress-bar-color:var(--accent);--poster-color:#0b0f14;--progress-mask:transparent}
    footer{position:fixed;right:10px;bottom:10px;font-size:12px;color:#6f839a;opacity:.75}
  </style>
</head>
<body>
  <header>
    <h1>HH.glb — 3D Viewer</h1>
    <div class="controls">
      <label><input id="autoRotateChk" type="checkbox" checked /> หมุนอัตโนมัติ</label>
      <div class="control"><label for="exposure">ความสว่าง</label> <input id="exposure" type="range" min="0.1" max="2.2" step="0.05" value="1.0" /></div>
      <div class="control"><label for="shadows">เงา</label> <input id="shadows" type="range" min="0" max="2" step="0.05" value="0.6" /></div>
      <div class="control"><label for="fov">มุมมอง (FOV)</label> <input id="fov" type="range" min="20" max="90" step="1" value="45" /></div>
      <button id="resetCam">รีเซ็ตมุมกล้อง</button>
    </div>
  </header>

  <!-- ใช้พาธจากรากโดเมนของเพจ -->
  <model-viewer id="viewer"
    src="/Kiattisak.github.io/HH.glb"
    camera-controls auto-rotate
    rotation-per-second="20deg"
    shadow-intensity="0.6"
    exposure="1"
    tone-mapping="aces"
    camera-orbit="0deg 70deg 2.2m"
    field-of-view="45deg"
    min-field-of-view="20deg"
    max-field-of-view="90deg"
    ar ar-modes="webxr scene-viewer quick-look"
    style="outline:none">
  </model-viewer>

  <footer>คลิกแล้วลาก = หมุน | สกอลล์ = ซูม | คลิกขวา/สองนิ้ว = แพน</footer>

  <script>
    const mv = document.getElementById('viewer');
    const autoChk = document.getElementById('autoRotateChk');
    const exposure = document.getElementById('exposure');
    const shadows  = document.getElementById('shadows');
    const fov      = document.getElementById('fov');
    const resetBtn = document.getElementById('resetCam');

    autoChk.addEventListener('change', e => mv.autoRotate = e.target.checked);
    exposure.addEventListener('input', e => mv.exposure = Number(e.target.value));
    shadows.addEventListener('input',  e => mv.shadowIntensity = Number(e.target.value));
    fov.addEventListener('input',      e => mv.fieldOfView = `${e.target.value}deg`);

    const DEFAULT_ORBIT='0deg 70deg 2.2m', DEFAULT_FOV='45deg';
    resetBtn.addEventListener('click', () => {
      mv.cameraOrbit = DEFAULT_ORBIT; mv.fieldOfView = DEFAULT_FOV; mv.cameraTarget = 'auto';
      if (autoChk.checked) { mv.autoRotate = false; requestAnimationFrame(()=> mv.autoRotate = true); }
    });

    mv.addEventListener('error', (e) => {
      console.error('Model-Viewer error:', e?.detail || e);
      alert('โหลด HH.glb ไม่ได้ — เช็คพาธ /Kiattisak.github.io/HH.glb, ชื่อไฟล์ (ตัวพิมพ์), และไฟล์ .nojekyll');
    });
  </script>
</body>
</html>
